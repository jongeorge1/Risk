<%
var currentdate = null;
%>

<% if( this.length < 1 ){ %>
	
	<li data-role="list-divider">
		You have no upcoming appointments.
	</li>

<% }else{ %>

<%for(var i = 0; i < this.length ; i++){ %>	
<%
var compare = new Date(this[i].StartDateTime);
compare.setHours(0);
compare.setSeconds(0);
compare.setMinutes(0);
compare.setMilliseconds(0);

if(currentdate!==compare.getTime()){
currentdate=compare.getTime();
%>
<li data-role="list-divider"><%= $.scroller.formatDate('D d M yy', this[i].StartDateTime) %></li>
<% } %>
<li><a class="app-link" href="patientappointmentedit.htm?id=<%= this[i].id %>">
    <h3><div class="overflow"><%= this[i].HcpTitle %> <%= this[i].HcpFirstName %> <%= this[i].HcpSurname %></div></h3>
	<% if(this[i].LocationName && this[i].LocationName.length>0){ %>
    <p><%= this[i].LocationName %></p>
    <% } %>
	<% if(this[i].TypeName && this[i].TypeName.length>0){ %>
    <p><%= this[i].TypeName %></p>
	<% } %>
	<p class="ui-li-aside"><strong><div class="overflow"><%= $.scroller.formatDate('D d M yy h:ii A', this[i].StartDateTime) %></div></strong></p>
</a></li>
<%}}%> 